html {
    font-size: 1rem;
}

body {
    background-image: url(wood-bg.jpg);
    background-repeat: no-repeat;
    background-size: cover;
}


.bookshelf {
    list-style: none;
    margin-top: 5rem;
    margin-bottom: 2rem;
    border-bottom: 2px solid rgb(0,0,0);
}

.book {
    display: inline-block;
    position: relative;
    cursor: pointer; 
    width: 2.5rem;
    height: 20rem;
    margin-right: 2rem; 
}





.book-wrapper .book-front{
    -webkit-writing-mode: vertical-rl; 
    writing-mode:tb-rl;
    position: absolute;
    width: 4rem;
    height: 20rem;
    display: block;
    background-color: teal;
    transform: rotateY( 0deg ) translateZ(7.5rem) ; 
}

.book-wrapper .book-left{
    position: absolute;
    width: 15rem;
    height: 20rem;
    display: block;
    background: lightgreen;
    transform: translateX(-7.5rem)  rotateY(-90deg) ;
}

.book-wrapper .book-right  { 
    position: absolute;
    width: 15rem;
    height: 20rem;
    display: block;
    background-size: cover;
    transform: translateX(-3.5rem) rotateY(90deg);
}
   

.book-wrapper .book-back {
    width: 4rem;
    height: 20rem;
    display: block;
    position: absolute;
    background: orange;
    transform: rotateX( 180deg ) translateZ( 7.5rem ); 

}

.book-wrapper .book-top {
    width: 4rem;
    height: 15rem;
    display: block;
    position: absolute;
    background: skyblue;
    transform: translateY(-7.5em) rotateX(90deg) ;

}

.book-wrapper .book-bottom {
    position: absolute;
    width: 4rem;
    height: 15rem;
    display: block;
    background: steelblue;
    transform: translateY(12.5em) rotateX(90deg) ;
}

.page {
    list-style: none;
    z-index: 10;
    /*transform: translateX(-6.5rem) translateY(0.5rem) translateZ(0rem) rotateY(90deg);*/
}

.page >li{
     border: 1px solid #ccc;
     width: 14rem;
     height: 19rem;
     position: absolute;
}

.page li:nth-child(1),.page li:nth-child(2),.page li:nth-child(3),.page li:nth-child(4),.page li:nth-child(5){
    background: #eee;
}

.page li:nth-child(1) {
    transform: translateX(-9rem) rotateY(90deg);

}

.page li:nth-child(2) {
    transform: translateX(-8.5rem) rotateY(90deg);

}

.page li:nth-child(3) {
    transform: translateX(-8rem) rotateY(90deg);

}

.page li:nth-child(4) {
    transform: translateX(-7.5rem) rotateY(90deg);

}

.page li:nth-child(5) {
    transform: translateX(-7rem) rotateY(90deg);

}
.page li:nth-child(6) {
    transform: translateX(-6.5rem) rotateY(90deg);

}
.page li:nth-child(7) {
    transform: translateX(-6rem) rotateY(90deg);

}


@keyframes stuckOutBook {
  50% {
    transform: translateZ(5rem);
  } 
  100% {
    transform: rotateX(-10deg);
  }
}

@keyframes stuckInBook {
  50% {
    transform: translateZ(5rem);
  } 
  100% {
    transform: rotateX(-10deg);
  }
}


@keyframes rotateLeftToTitlePage { 
  1%{
    transform:  rotateX(-10deg);
  } 
  100%{
    transform: rotateY(-90deg) translate(5rem);
  }
}

@keyframes rotateRightToSpine { 
 30%{
    transform:  rotateX(-10deg);
  } 
  100%{
    transform: rotateY(-90deg) translate(5rem);
  }
}



.book-outer-container{
    position: relative;
    perspective: 1000px;
    perspective-origin: center -1em;
    width: 4rem;
    height: 20rem;
}

.book-wrapper{
    width: 100%;
    height: 100%;
    position: absolute;
    transform-style: preserve-3d;
    -webkit-user-drag: none;
    -khtml-user-drag: none;
    -moz-user-drag: none;
    -o-user-drag: none;
    user-drag: none;
    cursor:grabbing;
}

.from_stacked_out_to_initial.book-wrapper{
   
    animation: stuckInBook 1s linear;
    animation-fill-mode: forwards;
    animation-direction: alternate-reverse;
}

.from_rotated_to_initial.dragged.stacked_out.book-wrapper{
    transform:  rotateX( -10deg);
}

.dragged.stacked_out.book-wrapper{
    transform:  rotateX( -10deg);
}

.dragged.rotated.book-wrapper{
    transform: rotateY(-90deg) translate(5rem) ;
}

.from_initial_to_stacked_out.book-wrapper{
    animation: stuckOutBook 1s linear;
    animation-fill-mode: forwards;
}




.from_stacked_out_to_rotated.book-wrapper{
    animation: rotateLeftToTitlePage 1s linear;
    animation-fill-mode: forwards;
}

.from_rotated_to_initial.book-wrapper{
    animation: rotateRightToSpine 1s linear;
    animation-fill-mode: forwards;
    animation-direction: alternate-reverse;
}




.book-spine-wrapper{
    padding: 0.625rem;
}

.book-titlepage-wrapper{
    padding: 0.625rem;
}

[draggable] {
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  user-select: none;
  -khtml-user-drag: element;
  -webkit-user-drag: element;
}